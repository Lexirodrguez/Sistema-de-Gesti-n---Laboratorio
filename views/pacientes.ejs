<!DOCTYPE html>
<html>
  <head>
    <title>Gestión de Pacientes</title>
    <link rel="stylesheet" href="/stylesheets/style.css" />
  </head>
  <body>
    <h1>Lista de Pacientes</h1>
    <nav>
      <ul>
        <li><a href="/">Inicio</a></li>
      </ul>
    </nav>

    <table>
      <thead>
        <tr>
          <th>ID</th>
          <th>Nombre</th>
          <th>Edad</th>
          <th>Cédula</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        <% pacientes.forEach(paciente => { %> 
          <tr>
            <td><%= paciente.id %></td>
            <td><%= paciente.nombre %></td>
            <td><%= paciente.edad %></td>
            <td><%= paciente.cedula %></td>
            <td><%= paciente.fechaNacimiento %></td>
            <td>
              <form action="/pacientes/<%= paciente.id %>/eliminar" method="POST" style="display:inline;">
                <button type="submit" onclick="return confirm('¿Eliminar paciente?')">Eliminar</button>
              </form>
              
              <a href="/pacientes/<%= paciente.id %>/editar">
                <button type="button">Editar</button>
              </a>
            </td>
          </tr> 
        <% }); %> </tbody>
    </table>

    <hr>

    <section>
  <h2><%= pacienteEditar ? 'Editar Paciente' : 'Agregar Nuevo Paciente' %></h2>
  
  <form action="<%= pacienteEditar ? '/pacientes/' + pacienteEditar.id + '/actualizar' : '/pacientes/nuevo' %>" method="POST">
    
    <label for="id">Id:</label> 
    <input type="number" id="id" name="id" value="<%= pacienteEditar ? pacienteEditar.id : '' %>" <%= pacienteEditar ? 'readonly' : 'required' %>> 
    
    <label for="nombre">Nombre:</label> 
    <input type="text" id="nombre" name="nombre" value="<%= pacienteEditar ? pacienteEditar.nombre : '' %>" required> 
    
    <label for="edad">Edad:</label> 
    <input type="number" id="edad" name="edad" value="<%= pacienteEditar ? pacienteEditar.edad : '' %>" required> 

    <label for="cedula">Cedula:</label> 
    <input type="number" id="cedula" name="cedula" value="<%= pacienteEditar ? pacienteEditar.cedula : '' %>" required>

    <label for="fechaNacimiento">Fecha de Nacimiento:</label> 
    <input type="date" id="fechaNacimiento" name="fechaNacimiento" value="<%= pacienteEditar ? pacienteEditar.fechaNacimiento : '' %>" required>
    
    <button type="submit">
      <%= pacienteEditar ? 'Guardar Cambios' : 'Agregar Paciente' %>
    </button>
    
    <% if (pacienteEditar) { %>
      <a href="/pacientes"><button type="button">Cancelar</button></a>
    <% } %>
  </form>
</section>
  </body>
</html>